#Ansible build
ansible-playbook infrastructure.yml

#Storm
##nimbus
docker run -d -p 6627:6627 -it -v $(pwd)/storm.yaml:/conf/storm.yaml storm storm nimbus
##supervisor
docker run -p --hostname nimbus_host 6700:6700 -d --restart always --name supervisor storm storm supervisor -c storm.zookeeper.servers='[zk_list]' -c nimbus.seeds='[nimbus_hosts]'
##deploy topology
storm jar target/StormTopology.jar StormTopology topology_name zk_host topic_name nimbus_host
#open ssh tunnel for redis
ssh -i <key.pem> -f -N -L6379:<redis-endpoint>:6379 ec2-user@<ec2-host> &